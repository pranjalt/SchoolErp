{% load table_tags %}
{% load staticfiles %}
<link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
<script src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
<script src="{% static 'js/commonUtils.js' %}"></script>

<script>
var examTypeId;

$(document).ready(function(){

alert("In Function");
	 $.ajax({
         type: "GET",
         url:"/getExamTypeList/",
         dataType: "json",
	 }).done(function(data) {
				$("#examTypeList").empty();
				$("#examTypeList").append(
				  $('<option></option>')
				      .val("0")
				        .html("Please Select")); 	         
       	$.each(data,function(key,value){
          		exam_type = value.fields.exam_type;
          		exam_type_id = value.pk;
          		
          		$("#examTypeList").append(
                        $('<option></option>')
                               .val(exam_type_id)
                               .html(exam_type));
          	});
		
      });
	 
	 var data = {class_id:'35'};
	 $.ajax({
         type: "GET",
         url:"/getSubjectByClass/",
		 data: data,
         dataType: "json",
	 }).done(function(data) {	
		
		$("#selectSubject").empty();
		$("#selectSubject").append(
		$('<option></option>')
		.val("0")
		.html("Please Select")); 	         
       	$.each(data,function(key,value){
          subject = value.subject.subject;
          subejct_id = value.subject.subject_id;	
          	$("#selectSubject").append(
            $('<option></option>')
               .val(subejct_id)
               .html(subject));
          	});	
			var usedNames = {};
			$("select[id='selectSubject'] > option").each(function () {
			if(usedNames[this.text]) {
            $(this).remove();
			} else {
            usedNames[this.text] = this.value;
			}
         });			
	  });
	 
	 
});

$("#getReport").on("click", function() {
alert("In function");
alert($("#examTypeList").val());
alert($("#selectSubject").val());
var examTypeId = $("#examTypeList").val();
var subject = $("#selectSubject").val();

var data = {ExamTypeId:examTypeId,classSubjectId:subject};
var url = '/getStudSyllabus/';
getAttendenceResultList(url,data)

});

</script>
<!-- Main content -->
<section class="content">
	<div class="row">
		<div class="col-xs-12">
			<div class="box">
				<div class="box-header">
					<h3 class="box-title">View Syllabus </h3>
				
				<div class="col-sm-12" style="margin-top:20px;">
						<div class="col-sm-3">
							<label>Select ExamType</label> <select class="form-control"
								id="examTypeList">

							</select>
						</div>
						
						<div class="col-sm-3">
							<label>Select Subject</label> <select class="form-control"
								id="selectSubject">

							</select>
						</div>
						<div class="col-sm-2 form-group">
						  <button type="button" class="btn btn-primary btn-md form-control col-sm-3" id="getReport" style="margin-top: 23px;" name="getReport"> Get Syllabus </button> 
						</div>
						
					</div>
				</div>
				<div class="box-body" id="AResult" style="display:none;" >
					{% render_table syllabusList %}
				</div>
				<!-- /.box-body -->
			</div>
			<!-- /.box -->
		</div>
		<!-- /.col -->
	</div>
	<!-- /.row -->
</section>
<!-- /.content -->